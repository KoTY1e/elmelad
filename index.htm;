<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title> ÙƒÙ„Ù„Øª Ø§Ù„Ø³Ù†Ù‡ Ø¨ Ø¬ÙˆØ¯Ùƒ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      /* ================== Ø£Ù„ÙˆØ§Ù† ÙˆØ³ØªØ§ÙŠÙ„ Ø¹Ø§Ù… ================== */
      :root {
        --bg: #23272a; /* Ø®Ù„ÙÙŠØ© Ø¯Ø§ÙƒÙ†Ø© */
        --panel: #2c2f33; /* Ø¨Ø§Ù†Ù„Ø² */
        --blurple: #5865f2; /* Discord Blurple */
        --blurple-2: #4752c4;
        --text: #ffffff;
        --ok: #22c55e; /* Ø£Ø®Ø¶Ø± */
        --warn: #facc15; /* Ø£ØµÙØ± */
        --danger: #ef4444; /* Ø£Ø­Ù…Ø± */
        --muted: #99aab5; /* Ø±Ù…Ø§Ø¯ÙŠ Ù†ØµÙŠ */
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, Arial, sans-serif;
        background: var(--bg);
        color: var(--text);
        text-align: center;
      }
      h1,
      h2,
      h3 {
        margin: 10px;
      }
      .container {
        display: grid;
        grid-template-columns: 0.7fr 1.5fr 0.7fr;
        grid-template-rows: 0.4fr;
        grid-auto-columns: 1fr;
        grid-auto-rows: 1fr;
        gap: 0px 0px;
        grid-auto-flow: row;
        justify-content: stretch;
      }

      .Header {
        padding: 10px 30px;
        display: flex;
        justify-self: stretch;
        align-self: stretch;
        grid-area: 1 / 1 / 2 / 4;
      }

      .Logo {
        padding: 10px 30px;
        justify-self: center;
        align-self: center;
        grid-area: 1 / 1 / 2 / 2;
      }

      .Back-button {
        justify-self: center;
        align-self: center;
        grid-area: 1 / 3 / 2 / 4;
      }

      .back {
        color: #3a6cf4;
        text-decoration: none;
        font-size: 20px;
      }

      .logo {
        height: 40px;
        width: 40px;
      }

      button {
        padding: 12px 20px;
        border: 0;
        border-radius: 12px;
        background: var(--blurple);
        color: #fff;
        cursor: pointer;
        transition: transform 0.15s ease, background 0.15s ease,
          opacity 0.15s ease;
        font-weight: 600;
      }
      button:hover {
        transform: scale(1.05);
        background: var(--blurple-2);
      }
      button:active {
        transform: scale(0.98);
        opacity: 0.9;
      }

      /* ================== Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ================== */
      #startScreen {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 14px;
        background: var(--panel);
        padding: 24px;
      }
      .field {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: center;
      }
      input {
        padding: 12px 14px;
        border-radius: 10px;
        border: 0;
        font-size: 16px;
        width: min(320px, 80vw);
      }

      /* ================== Ù„ÙˆØ­Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ================== */
      #scoreBoard {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        padding: 12px 16px;
        background: var(--panel);
        position: sticky;
        top: 0;
        z-index: 10;
        flex-wrap: wrap;
      }
      .teamBox {
        background: #1f2225;
        padding: 8px 12px;
        border-radius: 10px;
        min-width: 140px;
      }
      .teamName {
        font-weight: 700;
      }
      .score {
        font-weight: 800;
        margin-inline-start: 6px;
      }
      .activeTurn {
        outline: 2px solid var(--blurple);
        box-shadow: 0 0 0 3px rgba(88, 101, 242, 0.2);
      }

      #turnBanner {
        width: 100%;
        text-align: center;
        font-weight: 800;
        letter-spacing: 0.3px;
      }

      /* ================== Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© ================== */
      #gameScreen {
        display: none;
        padding: 16px;
      }
      #categories {
        display: grid;
        gap: 16px;
        margin-block: 16px;
        grid-template-columns: repeat(5, 1fr);
      }
      .category {
        background: var(--panel);
        border-radius: 14px;
        padding: 14px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
      .catHeader {
        font-weight: 800;
        color: var(--muted);
      }
      .qOval {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: var(--blurple);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 800;
        cursor: pointer;
        transition: transform 0.15s ease, background 0.15s ease,
          opacity 0.15s ease;
        user-select: none;
      }
      .qOval:hover {
        transform: scale(1.08);
        background: var(--blurple-2);
      }
      .qOval.used {
        background: #111;
        color: #666;
        cursor: not-allowed;
        transform: none;
      }
      .endButton {
        display: none;
        margin-top: 6px;
        background: linear-gradient(180deg, #f43f5e, #ef4444);
        font-weight: 800;
      }

      /* ================== Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ================== */
      #questionModal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.78);
        display: none;
        justify-content: center;
        align-items: center;
        padding: 14px;
        z-index: 50;
      }
      .modalCard {
        width: min(680px, 96vw);
        background: var(--panel);
        border-radius: 16px;
        padding: 18px;
        text-align: center;
        animation: pop 0.25s ease both;
      }
      @keyframes pop {
        from {
          opacity: 0;
          transform: scale(0.88);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      .progress {
        height: 14px;
        background: #3a3f44;
        border-radius: 10px;
        overflow: hidden;
        margin: 10px 0;
      }
      .progressBar {
        height: 100%;
        width: 100%;
        background: var(--blurple);
        transition: width 1s linear;
      }

      .lifelines {
        display: flex;
        gap: 8px;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 6px;
      }
      .life {
        padding: 8px 12px;
        border-radius: 10px;
        font-weight: 800;
        cursor: pointer;
        user-select: none;
        transition: transform 0.15s ease, filter 0.15s ease, opacity 0.15s ease;
      }
      .life:hover {
        transform: translateY(-1px) scale(1.03);
      }
      .life:active {
        transform: scale(0.98);
      }
      .life.skip {
        background: var(--warn);
        color: #000;
      }
      .life.hint {
        background: var(--ok);
      }
      .life.double {
        background: var(--danger);
      }
      .life.used {
        opacity: 0.45;
        cursor: not-allowed;
        filter: grayscale(0.4);
      }

      .answerReveal {
        opacity: 0;
        transform: scale(0.96);
        animation: fadeUp 0.25s 0.05s ease forwards;
      }
      @keyframes fadeUp {
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .hintBubble {
        display: none;
        margin-top: 10px;
        background: #1f2937;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px dashed #475569;
        font-size: 14px;
      }

      /* ================== Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ================== */
      #endScreen {
        display: none;
        min-height: 100vh;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        gap: 8px;
        background: var(--panel);
        padding: 18px;
      }
      .winner {
        font-size: 32px;
        color: gold;
        font-weight: 900;
      }
      .second {
        font-size: 22px;
        color: silver;
      }
      .rankWrap {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
        justify-content: center;
      }
      .rankCard {
        background: #1f2225;
        padding: 16px 20px;
        border-radius: 14px;
        min-width: 220px;
      }

      /* ================== Responsive ================== */
      #turnBanner {
        font-size: 18px;
      }
      @media (max-width: 1100px) {
        #categories {
          grid-template-columns: repeat(3, 1fr);
        }
      }
      @media (max-width: 700px) {
        #categories {
          grid-template-columns: repeat(2, 1fr);
        }
        .qOval {
          width: 64px;
          height: 64px;
        }
      }
      @media (max-width: 430px) {
        #categories {
          grid-template-columns: 1fr;
        }
        .qOval {
          width: 56px;
          height: 56px;
        }
        .teamBox {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
    <section id="startScreen">
      <div class="container">
        <div class="Header"></div>
        <div class="Logo">
          <img src="./White-logo.png" alt="" class="logo" />
        </div>
        <div class="Back-button"><a href="./games.html" class="back">></a></div>
      </div>
      <h1>ÙƒÙ„Ù„Øª Ø§Ù„Ø³Ù†Ù‡ Ø¨Ø¬ÙˆØ¯Ùƒ</h1>
      <div class="field">
        <input id="teamAInput" placeholder="Team A Name" />
        <input id="teamBInput" placeholder="Team B Name" />
      </div>
      <button id="startBtn">Start</button>
    </section>

    <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <header id="scoreBoard" style="display: none">
      <div id="teamABox" class="teamBox">
        <span class="teamName" id="teamAName">ÙØ±ÙŠÙ‚ A</span>:
        <span class="score" id="scoreA">0</span>
      </div>
      <div id="turnBanner">Turn TeamğŸ¯: <b id="turnName">ÙØ±ÙŠÙ‚ A</b></div>
      <div id="teamBBox" class="teamBox">
        <span class="teamName" id="teamBName">ÙØ±ÙŠÙ‚ B</span>:
        <span class="score" id="scoreB">0</span>
      </div>
    </header>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
    <main id="gameScreen">
      <div id="categories"><!-- ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯Ù‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ --></div>
      <button id="endButton" class="endButton">End GameğŸ</button>
    </main>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø³Ø¤Ø§Ù„ -->
    <div id="questionModal">
      <div class="modalCard" id="modalCard">
        <h2 id="modalTitle">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† - Ø§Ù„Ù†Ù‚Ø§Ø·</h2>
        <div style="opacity: 0.8; font-size: 14px; margin-top: -6px">
          Turn: <b id="modalTurn">â€”</b>
        </div>
        <div class="progress">
          <div id="progressBar" class="progressBar"></div>
        </div>
        <p
          id="modalQuestion"
          style="font-size: 18px; line-height: 1.6; margin: 8px 0 6px"
        >
          â€”
        </p>

        <!-- ØªÙ„Ù…ÙŠØ­ -->
        <div id="hintBubble" class="hintBubble"></div>

        <!-- Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª -->
        <div id="lifelines" class="lifelines"></div>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <div
          id="modalActions"
          style="
            margin-top: 8px;
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <button id="showAnswerBtn">Ø§Ù„ØªØ§Ù„ÙŠ / Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©</button>
        </div>
      </div>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© -->
    <section id="endScreen">
      <h1>Final Score ğŸ†</h1>
      <div class="rankWrap" id="rankWrap">
        <!-- ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© -->
      </div>
      <button onclick="location.reload()">ğŸ” Replay</button>
    </section>

    <script>
      /* ============================================================
       Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© (ØºÙŠÙ‘Ø±ÙŠ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø­Ø±Ù‘ÙŠØ©)
       5 ÙØ¦Ø§Øª: Ø£ÙˆÙ„ 4 Ø£Ø³Ø§Ø³ÙŠØ©ØŒ Ø§Ù„Ø®Ø§Ù…Ø³Ø© Ø®Ø§ØªÙ…Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©
       ============================================================ */
      const categoriesData = [
        {
          title: "Ø¸Ø±ÙÙŠ",
          questions: [
            {
              points: 100,
              q: " ØªÙØ¹ÙØ¸Ù‘ÙÙ…Ù Ù†ÙÙÙ’Ø³ÙÙŠ Ø§Ù„Ø±Ù‘ÙØ¨Ù‘Ù ØŒ ÙˆÙØªÙØ¨Ù’ØªÙÙ‡ÙØ¬Ù Ø±ÙÙˆØ­ÙÙŠ Ø¨ÙØ§Ù„Ù„Ù‡Ù Ù…ÙØ®ÙÙ„Ù‘ÙØµÙÙŠ . Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù„ ÙˆØ§ÙŠÙ† ØŸ",
              a: "Ù…Ø±ÙŠÙ… Ø§Ù„Ø¹Ø°Ø±Ø§Ø¡ ÙÙŠ Ø¨ÙŠØª Ø²ÙƒØ±ÙŠØ§ ÙˆØ§Ù„ÙŠØµØ§Ø¨Ø§Øª",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
            {
              points: 200,
              q: " ØªÙØ¬ÙØ¯ÙÙˆÙ†Ù Ø·ÙÙÙ’Ù„Ø§Ù‹ Ù…ÙÙ‚ÙÙ…Ù‘ÙØ·Ù‹Ø§ Ù…ÙØ¶Ù’Ø¬ÙØ¹Ù‹Ø§ ÙÙÙŠ Ù…ÙØ°Ù’ÙˆÙØ¯Ù . Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù„ ÙˆÙ„Ù…Ù† ØŸ ",
              a: "Ø§Ù„Ù…Ù„Ø§Ùƒ Ù„Ù„Ø±Ø¹Ø§Ø©",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
            {
              points: 300,
              q: "Â«Ø£ÙÙŠÙ’Ù†Ù ÙŠÙÙˆÙ„ÙØ¯Ù Ø§Ù„Ù’Ù…ÙØ³ÙÙŠØ­ÙØŸÂ» Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù„ ÙˆÙ„Ù…Ù† ÙˆÙ…ØªÙ‰ ØŸ ",
              a: "Ù‡ÙÙŠØ±ÙÙˆØ¯ÙØ³Ù Ù„ÙƒÙÙ„Ù‘Ù Ø±ÙØ¤ÙØ³ÙØ§Ø¡Ù Ø§Ù„Ù’ÙƒÙÙ‡ÙÙ†ÙØ©Ù ÙˆÙÙƒÙØªÙØ¨ÙØ©Ù Ø§Ù„Ø´Ù‘ÙØ¹Ù’Ø¨ Ø¨Ø¹Ø¯Ù…Ø§ Ø³Ù…Ø¹ Ù…Ù† Ø§Ù„Ù…Ø¬ÙˆØ³ Ø¨ÙˆÙ„Ø§Ø¯Ø© Ø§Ù„Ù…ÙˆÙ„ÙˆØ¯ Ù…Ù„Ùƒ Ø§Ù„ÙŠÙ‡ÙˆØ¯ .",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
            {
              points: 400,
              q: "Ù‡ÙØ§ Ø¥ÙÙ†Ù‘Ù Ù‡Ø°ÙØ§ Ù‚ÙØ¯Ù’ ÙˆÙØ¶ÙØ¹Ù Ù„ÙØ³ÙÙ‚ÙÙˆØ·Ù ÙˆÙÙ‚ÙÙŠÙØ§Ù…Ù ÙƒÙØ«ÙÙŠØ±ÙÙŠÙ†Ù ÙÙÙŠ Ø¥ÙØ³Ù’Ø±ÙØ§Ø¦ÙÙŠÙ„ÙØŒ ÙˆÙÙ„ÙØ¹ÙÙ„Ø§ÙÙ…ÙØ©Ù ØªÙÙ‚ÙØ§ÙˆÙÙ…Ù . Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù„ ÙˆÙ„Ù…Ù† ØŸ ",
              a: " Ø³Ù…Ø¹Ø§Ù† Ø§Ù„Ø´ÙŠØ® Ù„Ù…Ø±ÙŠÙ… Ø§Ù… ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
          ],
        },
        {
          title: "Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Øª  ",
          questions: [
            {
              points: 100,
              q: "Ù…Ù† Ø§Ù„Ø°ÙŠ Ø§ØµØ¯Ø± Ø§Ù…Ø± Ø¨Ø£Ù† ØªÙÙƒØªØªØ¨ ÙƒÙ„ Ø§Ù„Ù…Ø³ÙƒÙˆÙ†Ø© ÙÙŠ Ù„ÙˆÙ‚Ø§ Ù¢ ØŸ ",
              a: " Ø§ÙˆØºØ³Ø·Ø³ Ù‚ÙŠØµØ±",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
            {
              points: 200,
              q: "ÙƒÙ… Ù…Ø±Ø© Ø¸Ù‡Ø± Ø§Ù„Ù…Ù„Ø§Ùƒ Ù„ÙŠÙˆØ³Ù ØŸ",
              a: "Ù£ ",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
            {
              points: 300,
              q: "Ø§Ù„Ù‰ Ù…Ø§Ø°Ø§ ØªØ±Ù…Ø² Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ù…Ø¬ÙˆØ³ ØŸ",
              a: "Ø§Ù„Ø°Ù‡Ø¨ :- ÙŠØ±Ù…Ø² Ø§Ù„Ù‰ Ø§Ù„Ø£Ù„ÙˆÙ‡ÙŠÙ‘Ø© ÙˆØ§Ù„Ù…Ø¬Ø¯ ÙˆÙ‡Ùˆ ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø´Ø±Ù‚ Ù„Ø´Ø®ØµÙ‡ Ø§Ù„Ø¥Ù„Ù‡ÙŠ \n . Ø§Ù„Ù„Ø¨Ø§Ù† :-  Ø¯Ù‡Ù† Ø£Ùˆ Ø¹Ø·Ø±ØŒ ÙˆÙ‡Ùˆ ÙŠÙˆØ­ÙŠ Ø¨Ø§Ù„Ø¹Ø¨ÙŠØ± Ø§Ù„Ø°ÙŠ ÙŠÙÙŠØ­ Ù…Ù† Ø­ÙŠØ§Ø© Ø§Ù„Ø·Ù‡Ø± ÙˆØ§Ù„ÙƒÙ…Ø§Ù„  . \n  Ø§Ù„Ù…Ø± :-  Ù‡Ùˆ Ø¹Ø´Ø¨Ø© Ù…Ø±Ù‘Ø©ØŒ ÙˆÙ‡Ùˆ ÙŠÙÙ†Ø°Ø± Ø¨Ø§Ù„Ø¢Ù„Ø§Ù… Ø§Ù„ØªÙŠ Ø³ÙˆÙ ÙŠØªØ­Ù…Ù‘Ù„Ù‡Ø§ Ø§Ù„Ù…Ø³ÙŠØ­ ÙÙŠ Ø­Ù…Ù„Ù‡ Ù„Ø®Ø·Ø§ÙŠØ§ Ø§Ù„Ø¹Ø§Ù„Ù…. ",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
            {
              points: 400,
              q: "Ø§Ø°ÙƒØ± Ø®Ù…Ø³ Ù†Ø¨ÙˆØ§Øª ØªØ­Ù‚Ù‚ÙˆØ§ Ø¨Ù…ÙŠÙ„Ø§Ø¯ Ø§Ù„Ø±Ø¨ ÙŠØ³ÙˆØ¹ ØŸ",
              a: "Ù¡- Ø¹Ø°Ø±Ø§Ø¡ ØªØ­Ø¨Ù„ ÙˆØªÙ„Ø¯ Ø§Ø¨Ù†Ø§Ù‹ :- ÙˆÙÙ„ÙƒÙÙ†Ù’ ÙŠÙØ¹Ù’Ø·ÙÙŠÙƒÙÙ…Ù Ø§Ù„Ø³Ù‘ÙÙŠÙ‘ÙØ¯Ù Ù†ÙÙÙ’Ø³ÙÙ‡Ù Ø¢ÙŠÙØ©Ù‹: Ù‡ÙØ§ Ø§Ù„Ù’Ø¹ÙØ°Ù’Ø±ÙØ§Ø¡Ù ØªÙØ­Ù’Ø¨ÙÙ„Ù ÙˆÙØªÙÙ„ÙØ¯Ù Ø§Ø¨Ù’Ù†Ù‹Ø§ ÙˆÙØªÙØ¯Ù’Ø¹ÙÙˆ Ø§Ø³Ù’Ù…ÙÙ‡Ù Â«Ø¹ÙÙ…Ù‘ÙØ§Ù†ÙÙˆØ¦ÙÙŠÙ„ÙÂ». (Ø¥Ø´Ø¹ÙŠØ§Ø¡ Ù§: Ù¡Ù¤)\nÙ¢- Ø§Ù„ÙˆÙ„Ø¯ Ø§Ù„Ù…ÙˆÙ„ÙˆØ¯ ÙˆØ¹Ø·ÙŠØ© Ø§Ù„Ø³Ù…Ø§Ø¡ Ù„Ù„Ø¨Ø´Ø±ÙŠØ© :- Ù„Ø£ÙÙ†Ù‘ÙÙ‡Ù ÙŠÙÙˆÙ„ÙØ¯Ù Ù„ÙÙ†ÙØ§ ÙˆÙÙ„ÙØ¯ÙŒ ÙˆÙÙ†ÙØ¹Ù’Ø·ÙÙ‰ Ø§Ø¨Ù’Ù†Ù‹Ø§ØŒ ÙˆÙØªÙÙƒÙÙˆÙ†Ù Ø§Ù„Ø±Ù‘ÙÙŠÙØ§Ø³ÙØ©Ù Ø¹ÙÙ„ÙÙ‰ ÙƒÙØªÙÙÙÙ‡ÙØŒ ÙˆÙÙŠÙØ¯Ù’Ø¹ÙÙ‰ Ø§Ø³Ù’Ù…ÙÙ‡Ù Ø¹ÙØ¬ÙÙŠØ¨Ù‹Ø§ØŒ Ù…ÙØ´ÙÙŠØ±Ù‹Ø§ØŒ Ø¥ÙÙ„Ù‡Ù‹Ø§ Ù‚ÙØ¯ÙÙŠØ±Ù‹Ø§ØŒ Ø£ÙØ¨Ù‹Ø§ Ø£ÙØ¨ÙØ¯ÙÙŠÙ‘Ù‹Ø§ØŒ Ø±ÙØ¦ÙÙŠØ³Ù Ø§Ù„Ø³Ù‘ÙÙ„Ø§ÙÙ…Ù. (Ø¥Ø´Ø¹ÙŠØ§Ø¡ Ù©: Ù¦)\nÙ£- ÙˆÙ„Ø§Ø¯Ø© Ø§Ù„Ù…Ø³ÙŠØ­ ÙÙŠ Ø¨ÙŠØª Ù„Ø­Ù… : Â«Ø£ÙÙ…Ù‘ÙØ§ Ø£ÙÙ†Ù’ØªÙ ÙŠÙØ§ Ø¨ÙÙŠÙ’ØªÙ Ù„ÙØ­Ù’Ù…Ù Ø£ÙÙÙ’Ø±ÙØ§ØªÙØ©ÙØŒ ÙˆÙØ£ÙÙ†Ù’ØªÙ ØµÙØºÙÙŠØ±ÙØ©ÙŒ Ø£ÙÙ†Ù’ ØªÙÙƒÙÙˆÙ†ÙÙŠ Ø¨ÙÙŠÙ’Ù†Ù Ø£ÙÙ„ÙÙˆÙÙ ÙŠÙÙ‡ÙÙˆØ°ÙØ§ØŒ ÙÙÙ…ÙÙ†Ù’ÙƒÙ ÙŠÙØ®Ù’Ø±ÙØ¬Ù Ù„ÙÙŠ Ø§Ù„Ù‘ÙØ°ÙÙŠ ÙŠÙÙƒÙÙˆÙ†Ù Ù…ÙØªÙØ³ÙÙ„Ù‘ÙØ·Ù‹Ø§ Ø¹ÙÙ„ÙÙ‰ Ø¥ÙØ³Ù’Ø±ÙØ§Ø¦ÙÙŠÙ„ÙØŒ ÙˆÙÙ…ÙØ®ÙØ§Ø±ÙØ¬ÙÙ‡Ù Ù…ÙÙ†Ù’Ø°Ù Ø§Ù„Ù’Ù‚ÙØ¯ÙÙŠÙ…ÙØŒ Ù…ÙÙ†Ù’Ø°Ù Ø£ÙÙŠÙ‘ÙØ§Ù…Ù Ø§Ù„Ø£ÙØ²ÙÙ„ÙÂ». (Ù…ÙŠØ®Ø§ Ù¥: Ù¢)\nÙ¤- Ø°Ù‡Ø§Ø¨ Ø§Ù„Ù…Ø³ÙŠØ­ Ù„Ù…ØµØ± :- Â«Ù„ÙÙ…Ù‘ÙØ§ ÙƒÙØ§Ù†Ù Ø¥ÙØ³Ù’Ø±ÙØ§Ø¦ÙÙŠÙ„Ù ØºÙÙ„Ø§ÙÙ…Ù‹Ø§ Ø£ÙØ­Ù’Ø¨ÙØ¨Ù’ØªÙÙ‡ÙØŒ ÙˆÙÙ…ÙÙ†Ù’ Ù…ÙØµÙ’Ø±Ù Ø¯ÙØ¹ÙÙˆÙ’ØªÙ Ø§Ø¨Ù’Ù†ÙÙŠ. (Ù‡ÙˆØ´Ø¹ Ù¡Ù¡: Ù¡)\nÙ¥- Ù…ÙˆØª Ø§Ø·ÙØ§Ù„ Ø¨ÙŠØª Ù„Ø­Ù… :- Â«ØµÙÙˆÙ’ØªÙŒ Ø³ÙÙ…ÙØ¹Ù ÙÙÙŠ Ø§Ù„Ø±Ù‘ÙØ§Ù…ÙØ©ÙØŒ Ù†ÙÙˆÙ’Ø­ÙŒ ÙˆÙØ¨ÙÙƒÙØ§Ø¡ÙŒ ÙˆÙØ¹ÙÙˆÙÙŠÙ„ÙŒ ÙƒÙØ«ÙÙŠØ±ÙŒ. Ø±ÙØ§Ø­ÙÙŠÙ„Ù ØªÙØ¨Ù’ÙƒÙÙŠ Ø¹ÙÙ„ÙÙ‰ Ø£ÙÙˆÙ’Ù„Ø§ÙØ¯ÙÙ‡ÙØ§ ÙˆÙÙ„Ø§Ù ØªÙØ±ÙÙŠØ¯Ù Ø£ÙÙ†Ù’ ØªÙØªÙØ¹ÙØ²Ù‘ÙÙ‰ØŒ Ù„Ø£ÙÙ†Ù‘ÙÙ‡ÙÙ…Ù’ Ù„ÙÙŠÙ’Ø³ÙÙˆØ§ Ø¨ÙÙ…ÙÙˆÙ’Ø¬ÙÙˆØ¯ÙÙŠÙ†ÙÂ». (Ù…ØªÙ‰ Ù¢: Ù¡Ù¨)\nÙ¦- ÙŠØ¯Ø¹Ù‰ Ù†Ø§ØµØ±ÙŠÙ‹Ø§ :- ÙˆÙÙŠÙØ®Ù’Ø±ÙØ¬Ù Ù‚ÙØ¶ÙÙŠØ¨ÙŒ Ù…ÙÙ†Ù’ Ø¬ÙØ°Ù’Ø¹Ù ÙŠÙØ³Ù‘ÙÙ‰ØŒ ÙˆÙÙŠÙÙ†Ù’Ø¨ÙØªÙ ØºÙØµÙ’Ù†ÙŒ ( Ù†ÙØµÙØ± ) Ù…ÙÙ†Ù’ Ø£ÙØµÙÙˆÙ„ÙÙ‡ÙØŒ (Ø¥Ø´Ø¹ÙŠØ§Ø¡ Ù¡Ù¡: Ù¡)",
              hint: "Ø§ÙØªØ­ ÙƒØªØ§Ø¨Ùƒ",
            },
          ],
        },
        /* Ø§Ù„Ø®Ø§Ù…Ø³Ø©: Ø®Ø§ØªÙ…Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠØ©) â€” ÙÙŠÙ‡Ø§ Ø®ØµÙ…/Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ù‰ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ */
      ];

      /* ================== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ================== */
      let teamA = "ÙØ±ÙŠÙ‚ A",
        teamB = "ÙØ±ÙŠÙ‚ B";
      let scoreA = 0,
        scoreB = 0;
      let currentTurn = "A"; // A Ø£Ùˆ B
      let timer = null;
      let timeLeft = 90;
      let currentQ = null; // {ci, qi, btn}
      // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ù„ÙƒÙ„ ÙØ±ÙŠÙ‚
      const lifelinesUsed = {
        A: { skip: false, hint: false, double: false },
        B: { skip: false, hint: false, double: false },
      };

      /* ================== Ø¹Ù†Ø§ØµØ± DOM ================== */
      const startScreen = document.getElementById("startScreen");
      const startBtn = document.getElementById("startBtn");
      const teamAInput = document.getElementById("teamAInput");
      const teamBInput = document.getElementById("teamBInput");

      const scoreBoard = document.getElementById("scoreBoard");
      const teamANameEl = document.getElementById("teamAName");
      const teamBNameEl = document.getElementById("teamBName");
      const scoreAEl = document.getElementById("scoreA");
      const scoreBEl = document.getElementById("scoreB");
      const teamABox = document.getElementById("teamABox");
      const teamBBox = document.getElementById("teamBBox");
      const turnBanner = document.getElementById("turnBanner");
      const turnNameEl = document.getElementById("turnName");

      const gameScreen = document.getElementById("gameScreen");
      const catsWrap = document.getElementById("categories");
      const endButton = document.getElementById("endButton");

      const questionModal = document.getElementById("questionModal");
      const modalCard = document.getElementById("modalCard");
      const modalTitle = document.getElementById("modalTitle");
      const modalTurn = document.getElementById("modalTurn");
      const modalQuestion = document.getElementById("modalQuestion");
      const lifelinesBox = document.getElementById("lifelines");
      const progressBar = document.getElementById("progressBar");
      const hintBubble = document.getElementById("hintBubble");
      const modalActions = document.getElementById("modalActions");
      const showAnswerBtn = document.getElementById("showAnswerBtn");

      const endScreen = document.getElementById("endScreen");
      const rankWrap = document.getElementById("rankWrap");

      /* ================== Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ================== */
      startBtn.addEventListener("click", () => {
        teamA = teamAInput.value.trim() || "ÙØ±ÙŠÙ‚ A";
        teamB = teamBInput.value.trim() || "ÙØ±ÙŠÙ‚ B";
        teamANameEl.textContent = teamA;
        teamBNameEl.textContent = teamB;
        turnNameEl.textContent = currentTurn === "A" ? teamA : teamB;

        startScreen.style.display = "none";
        scoreBoard.style.display = "flex";
        gameScreen.style.display = "block";

        renderCategories();
        updateTurnHighlight();
        maybeShowEndButton();
      });

      /* ================== Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙØ¦Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø© ================== */
      function renderCategories() {
        catsWrap.innerHTML = "";
        categoriesData.forEach((cat, ci) => {
          const card = document.createElement("div");
          card.className = "category";

          const h = document.createElement("div");
          h.className = "catHeader";
          h.textContent = cat.title + (ci === 4 ? " (Optional)" : "");
          card.appendChild(h);

          // 4 Ø£Ø³Ø¦Ù„Ø© Ù„ÙƒÙ„ ÙØ¦Ø©
          cat.questions.forEach((q, qi) => {
            const btn = document.createElement("div");
            btn.className = "qOval";
            btn.textContent = q.points;
            btn.addEventListener("click", () => openQuestion(ci, qi, btn));
            card.appendChild(btn);
          });

          catsWrap.appendChild(card);
        });
      }

      /* ================== ÙØªØ­ Ø³Ø¤Ø§Ù„ ================== */
      function openQuestion(ci, qi, btn) {
        if (btn.classList.contains("used")) return;

        currentQ = { ci, qi, btn };
        const q = categoriesData[ci].questions[qi];

        // ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ + Ù…Ù† Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø¯ÙˆØ±
        modalTitle.textContent = `${categoriesData[ci].title} â€” ${q.points} Ù†Ù‚Ø·Ø©`;
        modalTurn.textContent = currentTurn === "A" ? teamA : teamB;
        modalQuestion.textContent = q.q;

        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªÙ„Ù…ÙŠØ­
        hintBubble.style.display = "none";
        hintBubble.textContent = "â€”";

        // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙ‚Ø·
        renderLifelines();

        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù„Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©)
        modalActions.innerHTML = "";
        const nextBtn = document.createElement("button");
        nextBtn.textContent = " The Answer";
        nextBtn.addEventListener("click", () => showAnswer());
        modalActions.appendChild(nextBtn);

        // ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø¤Ù‚Øª
        questionModal.style.display = "flex";
        startTimer();
      }

      /* ================== Ø§Ù„Ù…Ø¤Ù‚Øª ================== */
      function startTimer() {
        clearInterval(timer);
        timeLeft = 90;
        progressBar.style.width = "100%";
        timer = setInterval(() => {
          timeLeft--;
          const pct = Math.max(0, (timeLeft / 90) * 100);
          progressBar.style.width = pct + "%";
          if (timeLeft <= 0) {
            clearInterval(timer);
            showAnswer(); // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª â†’ Ø§Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
          }
        }, 1000);
      }

      function stopTimer() {
        clearInterval(timer);
      }

      /* ================== Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª ================== */
      function renderLifelines() {
        const L = lifelinesUsed[currentTurn];
        lifelinesBox.innerHTML = "";

        // ØªØ®Ø·ÙŠ
        const skip = document.createElement("div");
        skip.className = "life skip" + (L.skip ? " used" : "");
        skip.textContent = "â­ Skip";
        if (!L.skip) {
          skip.addEventListener("click", () => {
            L.skip = true;
            // ØªØ®Ø·ÙŠ: Ø§Ù‚ÙÙ„ Ø§Ù„Ø³Ø¤Ø§Ù„ ÙÙˆØ±Ù‹Ø§ Ø¨Ø¯ÙˆÙ† Ù†Ù‚Ø§Ø· ÙˆØ¹Ù„Ù‘Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¨ÙØ¯Ù‘Ù„ Ø§Ù„Ø¯ÙˆØ±
            markQuestionUsed(currentQ.btn);
            closeModal();
            switchTurn();
            maybeShowEndButton();
          });
        }
        lifelinesBox.appendChild(skip);

        // Ù‡Ù†Øª
        const hint = document.createElement("div");
        hint.className = "life hint" + (L.hint ? " used" : "");
        hint.textContent = "ğŸ’¡ Hint";
        if (!L.hint) {
          hint.addEventListener("click", () => {
            L.hint = true;
            const q = categoriesData[currentQ.ci].questions[currentQ.qi];
            hintBubble.textContent = "ğŸ’¡ " + (q.hint || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙ„Ù…ÙŠØ­");
            hintBubble.style.display = "block";
            renderLifelines(); // Ù„ØªØ·Ø¨ÙŠÙ‚ Ø­Ø§Ù„Ø© used Ø¨ØµØ±ÙŠÙ‹Ø§
          });
        }
        lifelinesBox.appendChild(hint);

        // Ø¯Ø§Ø¨Ù„
        const dbl = document.createElement("div");
        dbl.className = "life double" + (L.double ? " used" : "");
        dbl.textContent = "âœ–ï¸ Double";
        if (!L.double) {
          dbl.addEventListener("click", () => {
            L.double = true;
            // Ù…Ø¬Ø±Ø¯ ØªÙØ¹ÙŠÙ„ØŒ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¨ÙŠØ·Ø¨Ù‚ Ø¹Ù†Ø¯ Ù…Ù†Ø­/Ø®ØµÙ… Ø§Ù„Ù†Ù‚Ø§Ø· Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ
            // Ù…ÙÙŠØ´ UI Ø¥Ø¶Ø§ÙÙŠ Ù‡Ù†Ø§
            renderLifelines();
          });
        }
        lifelinesBox.appendChild(dbl);
      }

      /* ================== Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© + Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ù‚Ø§Ø· ================== */
      function showAnswer() {
        stopTimer();
        const { ci, qi } = currentQ;
        const q = categoriesData[ci].questions[qi];

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© + Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙØ¦Ø©
        modalQuestion.innerHTML = `<div class="answerReveal"><b> The Correct Answer:</b><br>${q.a}</div>`;

        modalActions.innerHTML = "";

        if (ci < 4) {
          // Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø¥Ù†ØªÙ ØªØ®ØªØ§Ø±ÙŠ Ù…ÙŠÙ† ÙŠØ§Ø®Ø¯ Ø§Ù„Ù†Ù‚Ø§Ø·)
          const btnA = document.createElement("button");
          btnA.textContent = teamA + " +" + q.points;
          btnA.addEventListener("click", () => grantPointsBasic("A", q.points));

          const btnB = document.createElement("button");
          btnB.textContent = teamB + " +" + q.points;
          btnB.addEventListener("click", () => grantPointsBasic("B", q.points));

          const btnNone = document.createElement("button");
          btnNone.textContent = "No points";
          btnNone.addEventListener("click", () => grantPointsBasic(null, 0));

          modalActions.append(btnA, btnB, btnNone);
        } else {
          // Ø§Ù„Ø®Ø§ØªÙ…Ø© (Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙ‚Ø·) â€” ØµØ­ ÙŠØ¶ÙŠÙØŒ ØºÙ„Ø· ÙŠØ®ØµÙ…
          const correct = document.createElement("button");
          correct.style.background = "linear-gradient(180deg,#16a34a,#22c55e)";
          correct.textContent = `âœ”ï¸ ${getTurnTeamName()} +${q.points}${
            isDoubleActive(currentTurn) ? " (Ø¯Ø§Ø¨Ù„)" : ""
          }`;
          correct.addEventListener("click", () => grantFinal(true, q.points));

          const wrong = document.createElement("button");
          wrong.style.background = "linear-gradient(180deg,#f97316,#ef4444)";
          wrong.textContent = `âŒ ${getTurnTeamName()} -${q.points}${
            isDoubleActive(currentTurn) ? " (Ø¯Ø§Ø¨Ù„)" : ""
          }`;
          wrong.addEventListener("click", () => grantFinal(false, q.points));

          modalActions.append(correct, wrong);
        }
      }

      /* ================== Ù…Ù†Ø­ Ø§Ù„Ù†Ù‚Ø§Ø· (Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©) ================== */
      function grantPointsBasic(team, basePoints) {
        const pts = computeFinalPoints(team, basePoints);
        if (team === "A") scoreA += pts;
        if (team === "B") scoreB += pts;

        updateScoresUI();

        // Ø¹Ù„Ù‘Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ù…Ø³ØªØ®Ø¯Ù… + Ø§Ù‚ÙÙ„ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ + Ø¨Ø¯Ù‘Ù„ Ø§Ù„Ø¯ÙˆØ±
        markQuestionUsed(currentQ.btn);
        closeModal();
        switchTurn();
        maybeShowEndButton();
        checkAutoEndIfAllDone();
      }

      /* ================== Ù…Ù†Ø­/Ø®ØµÙ… Ù†Ù‚Ø§Ø· (Ø§Ù„Ø®Ø§ØªÙ…Ø©) ================== */
      function grantFinal(isCorrect, basePoints) {
        const t = currentTurn; // Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙ‚Ø·
        let pts = basePoints;

        // Ø§Ù„Ø¯Ø§Ø¨Ù„ Ù„Ùˆ Ù…ÙØ¹Ù„ Ù„Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„ÙŠ â†’ ÙŠØ¶Ø§Ø¹Ù Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ Ø§Ù„Ø®ØµÙ…
        if (isDoubleActive(t)) pts *= 2;

        if (t === "A") {
          scoreA += isCorrect ? pts : -pts;
        } else {
          scoreB += isCorrect ? pts : -pts;
        }

        // Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ø³Ø¤Ø§Ù„ØŒ Ù†Ù„ØºÙŠ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¯Ø§Ø¨Ù„ (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)
        lifelinesUsed[t].double = false;

        updateScoresUI();
        markQuestionUsed(currentQ.btn);
        closeModal();
        switchTurn();
        maybeShowEndButton();
        checkAutoEndIfAllDone();
      }

      /* ================== Ù…Ø³Ø§Ø¹Ø¯ÙŠÙ† Ù„Ù„Ù†Ù‚Ø§Ø· ================== */
      function isDoubleActive(team) {
        return lifelinesUsed[team].double;
      }
      function computeFinalPoints(teamAwarded, basePoints) {
        // Ø§Ù„Ø¯Ø§Ø¨Ù„ ÙŠØ·Ø¨Ù‚ ÙÙ‚Ø· Ù„Ùˆ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…ÙÙ†Ø­ Ù„Ù‡ Ù‡Ùˆ Ù†ÙØ³ Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù„ÙŠ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø¯ÙˆØ±
        let pts = basePoints;
        if (
          teamAwarded &&
          teamAwarded === currentTurn &&
          isDoubleActive(currentTurn)
        ) {
          pts *= 2;
          lifelinesUsed[currentTurn].double = false; // Ø§Ø³ØªÙ‡Ù„Ùƒ Ø§Ù„Ø¯Ø§Ø¨Ù„
        }
        return pts;
      }

      /* ================== ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€UI ================== */
      function updateScoresUI() {
        scoreAEl.textContent = scoreA;
        scoreBEl.textContent = scoreB;
      }

      function updateTurnHighlight() {
        teamABox.classList.remove("activeTurn");
        teamBBox.classList.remove("activeTurn");
        if (currentTurn === "A") teamABox.classList.add("activeTurn");
        else teamBBox.classList.add("activeTurn");
        turnNameEl.textContent = getTurnTeamName();
      }

      function getTurnTeamName() {
        return currentTurn === "A" ? teamA : teamB;
      }

      function markQuestionUsed(btn) {
        btn.classList.add("used");
        btn.style.pointerEvents = "none";
      }

      function closeModal() {
        questionModal.style.display = "none";
      }
      function openModal() {
        questionModal.style.display = "flex";
      }

      /* ================== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ± ================== */
      function switchTurn() {
        currentTurn = currentTurn === "A" ? "B" : "A";
        updateTurnHighlight();
      }

      /* ================== Ù…Ù†Ø·Ù‚ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ================== */
      function basicCategoriesAllUsed() {
        // ØªØ­Ù‚Ù‘Ù‚ Ø£Ù† ÙƒÙ„ Ø£Ø³Ø¦Ù„Ø© Ø£ÙˆÙ„ 4 ÙØ¦Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…Ø©
        const cards = [...document.querySelectorAll(".category")].slice(0, 4);
        let allUsed = true;
        cards.forEach((card) => {
          const qs = [...card.querySelectorAll(".qOval")];
          qs.forEach((q) => {
            if (!q.classList.contains("used")) allUsed = false;
          });
        });
        return allUsed;
      }

      function allCategoriesAllUsed() {
        const qs = [...document.querySelectorAll(".qOval")];
        return qs.every((q) => q.classList.contains("used"));
      }

      function maybeShowEndButton() {
        // ÙŠØ¸Ù‡Ø± Ø²Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø£Ø±Ø¨Ø¹ ÙØ¦Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        if (basicCategoriesAllUsed()) {
          endButton.style.display = "inline-block";
          endButton.classList.add("endButton");
          endButton.onclick = () => endGame();
        }
      }

      function checkAutoEndIfAllDone() {
        // Ù„Ùˆ Ø®Ù„ØµØª ÙƒÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ø¨Ù…Ø§ ÙÙŠÙ‡Ø§ Ø§Ù„Ø®Ø§ØªÙ…Ø©) Ø§Ù†Ù‡ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        if (allCategoriesAllUsed()) {
          endGame();
        }
      }

      function endGame() {
        // Ø§Ø®ÙÙ Ø§Ù„Ù„Ø¹Ø¨ ÙˆØ§Ø¸Ù‡Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ù…Ø±ØªØ¨Ø©
        scoreBoard.style.display = "none";
        gameScreen.style.display = "none";
        questionModal.style.display = "none";

        const teams = [
          { name: teamA, score: scoreA },
          { name: teamB, score: scoreB },
        ].sort((x, y) => y.score - x.score);

        rankWrap.innerHTML = `
        <div class="rankCard">
          <div class="winner">ğŸ¥‡ ${teams[0].name}</div>
          <div style="font-size:18px">Points: <b>${teams[0].score}</b></div>
        </div>
        <div class="rankCard">
          <div class="second">ğŸ¥ˆ ${teams[1].name}</div>
          <div style="font-size:18px">Points: <b>${teams[1].score}</b></div>
        </div>
      `;
        endScreen.style.display = "flex";
      }

      /* ================== Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ================== */
      questionModal.addEventListener("click", (e) => {
        if (e.target === questionModal) {
          // Ù…Ø§ Ù†Ù‚ÙÙ„Ø´ ØºØµØ¨ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ø¤Ø§Ù„ â€” Ù„ÙƒÙ† Ù„Ùˆ Ø¹Ø§ÙŠØ²Ø© ØªØ³Ù…Ø­ÙŠØŒ ÙÙƒÙŠ Ø§Ù„ÙƒÙˆÙ…Ù†Øª:
          // closeModal();
        }
      });

      /* ===== (Ù…Ø¹Ù„ÙˆÙ…Ø©) Ù…Ù…ÙƒÙ† ØªØ¯Ø¹Ù…ÙŠ ØµÙˆØª ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ± Ø¨Ø¥Ø¶Ø§ÙØ© Audio ÙˆØªØ´ØºÙŠÙ„Ù‡ ÙÙŠ switchTurn ===== */
    </script>
  </body>
</html>
